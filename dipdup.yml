spec_version: 1.2
package: quipuswap_v3_indexer

logging: verbose

database:
  kind: postgres
  host: localhost
  port: 5432
  user: postgres
  password: changeme
  database: postgres
  schema_name: public

contracts:
  # v3_pool:
  #   address: KT1XfiFL1sfrncPUg8SNsgTFKsSS4e2fbT7f
  #   typename: v3_pool
  v3_factory:
    address: KT1JNNMMGyNNy36Zo6pcgRTMLUZyqRrttMZ4
    typename: v3_factory
  # fa12_token:
  #   address: KT1K9gCRgaLRFKTErYt1wVxA3Frb9FjasjTV
  #   typename: fa12_token
  # fa2_token:
  #   address: KT193D4vozYnhGJQVtw7CoxxqphqUEEwK6Vb
  #   typename: fa2_token

datasources:
  tzkt:
    kind: tzkt
    url: https://api.tzkt.io

indexes:
  factories:
    kind: operation
    datasource: tzkt
    types:
      - origination
    contracts:
      - v3_factory
    handlers:
      - callback: on_pool_origination
        pattern:
          - type: origination
            source: v3_factory